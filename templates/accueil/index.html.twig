{% extends 'base.html.twig' %}

{% block title %}Forum — Accueil{% endblock %}

{% block body %}
<style>
    .wrap { max-width: 980px; margin: 0 auto; padding: 24px 20px 64px; }
    .hero { display: grid; gap: 18px; }
    .hero h1 { font-size: 40px; letter-spacing: 0.5px; margin: 0; }
    .hero p { margin: 0; color: var(--muted); font-size: 18px; }
    .cta { display: flex; gap: 12px; flex-wrap: wrap; margin-top: 18px; }
    .grid { display: grid; gap: 16px; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); margin-top: 28px; }
    .card { background: rgba(17, 24, 39, 0.85); border: 1px solid #1f2937; border-radius: 14px; padding: 16px; }
    .card h3 { margin: 0 0 8px; }
    .card p { margin: 0; color: var(--muted); font-size: 14px; }
    .list { margin-top: 28px; display: grid; gap: 10px; }
    .row { display: grid; gap: 10px; grid-template-columns: 2fr 1fr 1fr; align-items: center; }
    .row > div { background: rgba(17, 24, 39, 0.7); border: 1px solid #1f2937; border-radius: 12px; padding: 10px; }
    .pager { display: flex; gap: 8px; margin-top: 18px; }
    footer { margin-top: 32px; color: var(--muted); font-size: 13px; }
</style>

<div class="wrap">
    <section class="hero">
        <h1>Forum Symfony</h1>
        <p>Bienvenue ! Accède aux thèmes, sujets et à l’interface de connexion.</p>
        <div class="cta">
            {% if themes|length > 0 %}
                <a class="btn primary" href="{{ path('app_theme', {id: themes[0].theme.id}) }}">Voir un thème</a>
            {% endif %}
            <a class="btn ghost" href="{{ path('app_connexion') }}">Se connecter</a>
        </div>
    </section>

    <section class="list">
        <h2>Thèmes</h2>
        {% if themes is empty %}
            <div class="card">Aucun thème pour le moment.</div>
        {% else %}
            <div class="row">
                <div><strong>Thème</strong></div>
                <div><strong>Dernière discussion</strong></div>
                <div><strong>Discussions</strong></div>
            </div>
            {% for item in themes %}
                <div class="row">
                    <div>
                        <a href="{{ path('app_theme', {id: item.theme.id}) }}">{{ item.theme.titre }}</a>
                    </div>
                    <div>
                        {% if item.lastSujetAt %}
                            {{ item.lastSujetAt|date('d/m/Y H:i') }}
                        {% else %}
                            —
                        {% endif %}
                    </div>
                    <div>{{ item.sujetCount }}</div>
                </div>
            {% endfor %}
            {% if pages > 1 %}
                <div class="pager">
                    {% for p in 1..pages %}
                        <a class="btn ghost" href="{{ path('app_accueil', {page: p}) }}">{{ p }}</a>
                    {% endfor %}
                </div>
            {% endif %}
        {% endif %}
    </section>

    <section class="grid">
        <div class="card">
            <h3>Thèmes</h3>
            <p>Parcours les catégories de discussion et trouve les sujets actifs.</p>
        </div>
        <div class="card">
            <h3>Sujets</h3>
            <p>Ouvre un sujet ou réponds aux discussions existantes.</p>
        </div>
        <div class="card">
            <h3>Modération</h3>
            <p>Accès réservé pour gérer les contenus signalés.</p>
        </div>
    </section>

    <footer>Projet forum — Symfony 8</footer>
</div>
{% endblock %}
